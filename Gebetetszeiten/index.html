<!DOCTYPE html> 
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Köln | Gebetszeiten</title>
    <link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css">
    <link data-n-head="ssr" rel="icon" href="https://cdn-icons-png.flaticon.com/512/3426/3426748.png" type="image/x-icon">
    <script src="https://kit.fontawesome.com/6a6d6ea2eb.js" crossorigin="anonymous"></script>
</head>
<body onload="initWork()" >
    <style>
        body{
            font-family: Arial,Helvetica,sans-serif;
            overflow: hidden;
        }
        .color0{
            color: #4a4a4a;
        }
        .center{
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 1vh;
        }
        #zeitbiszumnaechstengebet{
            color: #cacaca;
            font-size: 4em;
            font-weight: 700;
        }
        #ort{
            font-size: 2.9em;
            font-weight: 700;
        }
        #zeitpunkt{
            color: rgba(0, 0, 0, 0.849);
            font-size: 3.5vh;
        }
        .gebete{
            margin-top: 5vh;
            align-items:center ;
            justify-content: center;
            display: grid;
            grid-template-columns: 20vh 20vh 20vh 20vh 20vh;
            grid-gap: 8vh;
            padding-bottom: 10vh;
        }
        .cont{
            align-items:center ;
            justify-content: center;
            display: grid;
            grid-template-columns: 120%;
            grid-gap: 2vh;
        }
        #gebet{
            align-items: center;
            justify-content: center;
            display: flex;
            font-size: 1.3em;
            font-weight: 400;
            margin-top: 20px;
        }
        .zeit{
            align-items: center;
            justify-content: center;
            display: flex;
            font-size: 2.9em;
            font-weight: 700;
            }
        .fa-solid, .fa{
            padding : 6vh;
        }
        .header{
            display: grid;
            grid-template-columns: 10vw 80vw 10vw;
            font-size: 3.5vh;
        }
        .footer{
            padding-top: 2vh;
            font-size: 3vh;
        }
        @media screen and (max-width: 780px) {
            body{
                overflow: visible;
            }
            .gebete{
            align-items:center ;
            justify-content: center;
            display: grid;
            grid-template-columns: 20vh;
            grid-gap: 10vh;
            padding-bottom: 4vh;
            }
            .header{
                display: grid;
                grid-template-columns: 10vw 70vw 10vw;
                font-size: 3.5vh;
            }
        }
    </style>
<div class="header">
    <i class="fa-solid fa-mosque color0"></i>
    <div ></div>
    <i class="fa-solid fa-location-dot color0"></i>
</div>
   
        <h1 id="zeitbiszumnaechstengebet" class="center " style="margin-bottom:5vh;">00:11:36</h1>
        <h1 id="ort" class="center color0">Köln</h1>
        <h1 id="zeitpunkt" class="center color0">21.03.2022 13:12:12</h1>
        <h2 id="today" class="center">  </h2>
    <div class="gebete center color0">
        <div class="cont ">
            <span id="gebet" >Fadjr:</span>
            <span id="gebetszeit" class="zeit">12:45</span>
        </div>
        <div class="cont">
            <span id="gebet">Dhuhr:</span>
            <span id="gebetszeit0" class="zeit">12:45</span>
        </div>
        <div class="cont">
            <span id="gebet">Asr:</span>
            <span id="gebetszeit1" class="zeit">12:45</span>
        </div>
        <div class="cont">
            <span id="gebet">Maghrib:</span>
            <span id="gebetszeit2" class="zeit">12:45</span>
        </div>
        <div class="cont">
            <span id="gebet">Ishaa:</span>
            <span id="gebetszeit3" class="zeit">12:45</span>
        </div>
    </div>
<div class="footer">
    <div class="center">
        <a href="https://github.com/SemirSljiivic" target="_blank"><i class="fa fa-github color0" aria-hidden="true" ></i></a>
        <a href ="https://github.com/SemirSljiivic/Gebetszeiten" target="_blank"><i class="fa-solid fa-code color0"></i></a>
        <i class="fa-solid fa-moon color0" onclick="changeMode();"></i>
    </div>
</div>

<script type="text/javascript" src="Hijri.js">
    type="text/javascript">
</script>

<script>
    function initWork() {
            //Today
            var todayElement = document.getElementById("today");
            todayElement.innerHTML = HijriJS.today().toString();
        }
        </script>
    

    <script>
        setInterval("myTime()", 1000)

        

        const options = {
    method: 'GET',
    headers: {
        'X-RapidAPI-Host': 'muslimsalat.p.rapidapi.com',
        'X-RapidAPI-Key': '1eab2d90ebmshd1e4dfcbe15d06fp1f8465jsn47a0f24ae6aa'
    }
};

function ZwölfZuVierundzwanzig(str)
{
    console.log(str);
    var suffix = str.substring(str.length - 2);

    var segmente = str.split(":");
    var stunde = segmente[0];
    var minute = segmente[1].split(" ")[0];
    if (suffix == "pm"){
        stunde = parseInt(stunde) + 12;
    }

    if (stunde == 24)
        stunde = 0;
    
    return stunde + ":" + minute;
}

async function HoleZeit(){
    const response = await fetch('https://muslimsalat.p.rapidapi.com/cologne.json', options)
    const data = await response.json();
    const {fajr, dhuhr, asr, maghrib, isha} = data.items[0];

    document.getElementById("gebetszeit").textContent = ZwölfZuVierundzwanzig("0"+fajr);
    document.getElementById("gebetszeit0").textContent = ZwölfZuVierundzwanzig(dhuhr);
    document.getElementById("gebetszeit1").textContent = ZwölfZuVierundzwanzig(asr);
    document.getElementById("gebetszeit2").textContent = ZwölfZuVierundzwanzig(maghrib);
    document.getElementById("gebetszeit3").textContent = ZwölfZuVierundzwanzig(isha);

}
 
HoleZeit();
var bool0 = true;
function changeMode(){
   
        var obj = document.getElementsByClassName("color0");
        if(bool0){      
            for (var i = 0; i < obj.length; i++) {
            obj[i].style.color = "white";
            }
            document.querySelector("body").style.background = "#4a4a4a";
            bool0 = false;
        }
        else{      
            for (var i = 0; i < obj.length; i++) {
            obj[i].style.color = "#4a4a4a";
            }
            document.querySelector("body").style.background = "white";
            bool0 = true;
        }
    }


function myTime(){
            a = new Date();
            b = a.getHours();
            c = a.getMinutes();
            d = a.getSeconds();
            e = a.getDay()+1;
            f = a.getMonth()+1;
            g = a.getFullYear () ;
            
            if(b<= 9){
                b = "0" + b;
            }
            if(e<= 9){
                e = "0" + e;
            }
            if(f<= 9){
                f = "0" + f;
            }
            if(c<= 9){
                c = "0" + c;
            }
            if(d<= 9){
                d = "0" + d;
            }

            zeit = b+':'+c+':'+d ;
            document.getElementById("zeitpunkt").innerText = zeit+ "  " + e + "." + f + "." + g;
            
            var fajr = (document.getElementById("gebetszeit").textContent).split(":");
            var dhuhr = (document.getElementById("gebetszeit0").textContent).split(":");
            var asr = (document.getElementById("gebetszeit1").textContent).split(":");
            var maghrib = (document.getElementById("gebetszeit2").textContent).split(":");
            var isha = (document.getElementById("gebetszeit3").textContent).split(":");
            fajr1 = parseInt(fajr[0]) * 60 + parseInt(fajr[1]);
            dhuhr1 = parseInt(dhuhr[0]) * 60 + parseInt(dhuhr[1]);
            asr1 = parseInt(asr[0]) * 60 + parseInt(asr[1]);
            maghrib1 = parseInt(maghrib[0]) * 60 + parseInt(maghrib[1]);
            isha1 = parseInt(isha[0]) * 60 + parseInt(isha[1]);
            time = parseInt(b) * 60 + parseInt(c);
            
            if(fajr1 <  time && dhuhr1 > time){
                document.getElementById("zeitbiszumnaechstengebet").innerText = MinutenUmwandeln(dhuhr1  - time);
                document.getElementById("gebetszeit0").style.color = "#a59573";
            }
            if(dhuhr1 <  time && asr1 > time){
                document.getElementById("zeitbiszumnaechstengebet").innerText = MinutenUmwandeln(asr1 - time);
                document.getElementById("gebetszeit1").style.color = "#a59573";
            }
            if(asr1 <   time && maghrib1 > time){
                document.getElementById("zeitbiszumnaechstengebet").innerText = MinutenUmwandeln(maghrib1 - time);
                document.getElementById("gebetszeit2").style.color = "#a59573";
            }
            if(maghrib1 <   time && isha1 > time){
                document.getElementById("zeitbiszumnaechstengebet").innerText = MinutenUmwandeln(isha1 - time);
                document.getElementById("gebetszeit3").style.color = "#a59573";
            }
            if(isha1 < time){
                document.getElementById("zeitbiszumnaechstengebet").innerText = MinutenUmwandeln((fajr1 + 24* 60) - time);
                document.getElementById("gebetszeit").style.color = "#a59573";
            }
        }

        
            
        function MinutenUmwandeln(str){
            var h = 0, m = 0, s = 60 - d;

            while(str>60){
                str = str -60;
                h = h+ 1;
            }
            if(h==0){
                h = "0";
            }
            if(s==0){
                s = "0";
            }
            m=str;
            if(h<= 9){
                h = "0" + h;
            }
            if(m<= 9){
                m = "0" + m;
            }
            if(s<= 9){
                s = "0" + s;
            }
            return h + ":" + m + ":" + s ;
        }

    </script>

</body>
</html>
